# インテグレーション

## SNS（Simple Notification Service）
フルマネージド型のpub/subメッセージングサービス

* コンポーネント間のメッセージ通知やアラート通知に利用
* AWS上でイベント通知やメッセージング処理/プッシュ通知をするユースケースで利用
* アラーム設定からSMS,Eメール通知にも対応。（一方、SESはSMSには対応していないので注意）

## SQS（Simple Queue Service）
フルマネージド型のメッセージキュイーングサービス

* キューによってシステム処理の水平分散が可能
  - https://aws.amazon.com/jp/blogs/developer/using-python-and-amazon-sqs-fifo-queues-to-preserve-message-sequencing/
* キューに対して優先度を設定することが可能
* 受信側はポーリング通信で受信する

### キューの種類
* 標準キュー（Standardキュー）
  - メッセージの配信順序の保証なし
  - 同一のメッセージが2回配信されることがある
  - TPS（1秒あたりのトランザクション数）の件数は無制限
* FIFOキュー
  - メッセージの配信順序が保証されている
  - 標準キューとは異なり、同一メッセージに2重取得はない
  - TPSの件数は300

### 可視性タイムアウト
* 他のコンシューマーが同じメッセージを再処理しないようにするには、可視性タイムアウトを設定する。（メッセージが受信された直後は、メッセージはキューに残ったまま）
* この可視性タイムアウトの有効期限（30秒〜12時間）内は、他のコンシューマーが同じメッセージを受信したり処理したりすることができない
* 有効期限をすぎると、別のインスタンスでキューからメッセージを取得できる

## SES
* Eメールの送受信機能を提供するサービス
* MTAサービスのため、CloudWatchアラームに対してフックするような用途ならSNSを利用する

## MQ
Apache ActiveMQ向けのマネージド型メッセージブローカーサービス

## Step Functions
* ワークフローを制御するフルマネージドサービス
* Lambda関数や複数のAWSサービスをプロセスとして配置し、サーバレースのワークフロー作成・管理を実現
* ワークフローの最大実行時間は1年
* ワークフローをマネジメントコンソールのGUIで変更できないSWF（Simple Workflow）というサービスもある
